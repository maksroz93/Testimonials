<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–í—ñ–¥–≥—É–∫–∏ –ø–∞—Ü—ñ—î–Ω—Ç—ñ–≤ | –õ—ñ–∫–∞—Ä –ú–∞–∫—Å–∏–º</title>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/blueimp-md5/2.18.0/js/md5.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.0/papaparse.min.js"></script>
    
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap" rel="stylesheet">

    <style>
        :root {
            --primary: #2c3e50;
            --accent: #007AFF;
            --bg: #F5F7FA;
            --card-bg: #ffffff;
            --text-secondary: #6B7280;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--bg);
            margin: 0;
            padding: 0;
            color: var(--primary);
            line-height: 1.5;
        }

        .profile-header {
            background: white;
            text-align: center;
            padding: 40px 20px;
            border-bottom: 1px solid #eee;
            margin-bottom: 40px;
        }

        .profile-img {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            object-fit: cover;
            margin-bottom: 15px;
            border: 3px solid white;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }

        .profile-name { font-size: 1.5rem; font-weight: 700; margin: 0 0 5px 0; }
        .profile-bio { color: var(--text-secondary); font-size: 0.95rem; margin-bottom: 20px; }

        .btn-primary {
            display: inline-block;
            background-color: var(--accent);
            color: white;
            text-decoration: none;
            padding: 12px 24px;
            border-radius: 50px;
            font-weight: 600;
            box-shadow: 0 4px 10px rgba(0, 122, 255, 0.3);
            transition: transform 0.2s;
        }
        .btn-primary:hover { transform: translateY(-2px); }

        .wall-container {
            column-count: 3;
            column-gap: 20px;
            max-width: 1100px;
            margin: 0 auto;
            padding: 0 20px 60px 20px;
        }

        .review-card {
            background: var(--card-bg);
            border-radius: 16px;
            padding: 24px;
            margin-bottom: 20px;
            break-inside: avoid;
            box-shadow: 0 2px 8px rgba(0,0,0,0.04);
            border: 1px solid rgba(0,0,0,0.03);
            transition: transform 0.2s;
        }

        .review-card:hover { transform: translateY(-3px); box-shadow: 0 10px 20px rgba(0,0,0,0.08); }

        .stars { color: #FFB400; font-size: 1.2rem; margin-bottom: 12px; letter-spacing: 2px; }
        .review-text { font-size: 0.95rem; color: #374151; margin-bottom: 20px; }

        .author {
            border-top: 1px solid #f3f4f6;
            padding-top: 15px;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .patient-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: #eee;
            object-fit: cover;
        }

        .author-info { display: flex; flex-direction: column; }
        .author-name { font-weight: 600; font-size: 0.9rem; color: var(--primary); }
        .author-detail { font-size: 0.8rem; color: #9CA3AF; margin-top: 2px; }

        @media (max-width: 900px) { .wall-container { column-count: 2; } }
        @media (max-width: 600px) { .wall-container { column-count: 1; } }
    </style>
</head>
<body>

    <div class="profile-header">
        <img src="https://cdn-icons-png.flaticon.com/512/3774/3774299.png" alt="Doctor" class="profile-img">
        <h1 class="profile-name">–í–∞—à–µ –Ü–º'—è</h1>
        <p class="profile-bio">–î–∏—Ç—è—á–∏–π –Ω–µ–≤—Ä–æ–ª–æ–≥</p>
        <a href="LINKTREE_URL" class="btn-primary">üìÖ –ó–∞–ø–∏—Å–∞—Ç–∏—Å—å</a>
    </div>

    <div id="reviews-wall" class="wall-container">
        <p style="text-align:center; color:#999">–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è...</p>
    </div>

    <script>
        // –í–ê–®–ï –ü–û–°–ò–õ–ê–ù–ù–Ø
        const sheetUrl = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vSs5tdxHhDMHgMHYlC8sms6RUVGDBvG_6lSp2F8SQ-0GqmtgjIPNbG9ekag5Pk5goHEeZCHAy9UA6YN/pub?gid=167862335&single=true&output=csv';

        function getStars(rating) {
            if (!rating) rating = 5;
            return '‚òÖ'.repeat(rating) + '‚òÜ'.repeat(5 - rating);
        }

        Papa.parse(sheetUrl, {
            download: true,
            header: true,
            skipEmptyLines: true,
            complete: function(results) {
                const data = results.data;
                const container = document.getElementById('reviews-wall');
                container.innerHTML = '';

                if (data.length === 0) {
                    container.innerHTML = '<p style="text-align:center">–ü–æ–∫–∏ –Ω–µ–º–∞—î –≤—ñ–¥–≥—É–∫—ñ–≤.</p>';
                    return;
                }

                data.forEach(row => {
                    const review = row['Review'] || row['–í—ñ–¥–≥—É–∫'] || row['Feedback'];
                    if (!review) return;

                    const name = row['Name'] || row["–Ü–º'—è"] || '–ê–Ω–æ–Ω—ñ–º–Ω–æ';
                    const rating = parseInt(row['Rating'] || row['–û—Ü—ñ–Ω–∫–∞'] || '5');
                    const detail = row['Detail'] || row['–î–µ—Ç–∞–ª—ñ'] || ''; 
                    
                    // --- –õ–û–ì–Ü–ö–ê GRAVATAR ---
                    // –®—É–∫–∞—î–º–æ –∫–æ–ª–æ–Ω–∫—É Email (–∞–±–æ –ü–æ—à—Ç–∞)
                    const email = row['Email'] || row['email'] || row['–ü–æ—à—Ç–∞'] || '';
                    
                    let avatarUrl;
                    if (email) {
                        // 1. –û—á–∏—â–∞—î–º–æ email (–ø—Ä–∏–±–∏—Ä–∞—î–º–æ –ø—Ä–æ–±—ñ–ª–∏, —Ä–æ–±–∏–º–æ –º–∞–ª–µ–Ω—å–∫—ñ –ª—ñ—Ç–µ—Ä–∏)
                        const cleanEmail = email.trim().toLowerCase();
                        // 2. –®–∏—Ñ—Ä—É—î–º–æ –≤ MD5 (–≤–∏–º–æ–≥–∞ Gravatar)
                        const emailHash = md5(cleanEmail);
                        // 3. –§–æ—Ä–º—É—î–º–æ –ø–æ—Å–∏–ª–∞–Ω–Ω—è. d=identicon –æ–∑–Ω–∞—á–∞—î, —â–æ —è–∫—â–æ —Ñ–æ—Ç–æ –Ω–µ–º–∞—î,
                        // –±—É–¥–µ –∫—Ä–∞—Å–∏–≤–∞ –≥–µ–æ–º–µ—Ç—Ä–∏—á–Ω–∞ —Ñ—ñ–≥—É—Ä–∞.
                        avatarUrl = `https://www.gravatar.com/avatar/${emailHash}?d=identicon&s=128`;
                    } else {
                        // –Ø–∫—â–æ –ø–æ—à—Ç–∏ –Ω–µ–º–∞—î - –≥–µ–Ω–µ—Ä—É—î–º–æ –∞–≤–∞—Ç–∞—Ä –∑ —ñ–Ω—ñ—Ü—ñ–∞–ª–∞–º–∏
                        avatarUrl = `https://ui-avatars.com/api/?name=${name}&background=random&color=fff`;
                    }

                    const card = document.createElement('div');
                    card.className = 'review-card';
                    
                    card.innerHTML = `
                        <div class="stars">${getStars(rating)}</div>
                        <div class="review-text">${review}</div>
                        <div class="author">
                            <img src="${avatarUrl}" class="patient-avatar">
                            <div class="author-info">
                                <span class="author-name">${name}</span>
                                ${detail ? `<span class="author-detail">${detail}</span>` : ''}
                            </div>
                        </div>
                    `;

                    container.appendChild(card);
                });
            }
        });
    </script>
</body>
</html>
