<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–í—ñ–¥–≥—É–∫–∏ –ø–∞—Ü—ñ—î–Ω—Ç—ñ–≤ | –õ—ñ–∫–∞—Ä –ú–∞–∫—Å–∏–º</title>
    <link rel="icon" href="https://cdn-icons-png.flaticon.com/512/3063/3063822.png">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.0/papaparse.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap" rel="stylesheet">

    <style>
        :root {
            --primary: #2c3e50;
            --accent: #007AFF;
            --bg: #F5F7FA;
            --card-bg: #ffffff;
            --text-secondary: #6B7280;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--bg);
            margin: 0;
            padding: 0;
            color: var(--primary);
            line-height: 1.5;
        }

        /* --- –®–ê–ü–ö–ê --- */
        .profile-header {
            background: white;
            text-align: center;
            padding: 40px 20px;
            border-bottom: 1px solid #eee;
            margin-bottom: 40px;
        }

        .profile-img {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            object-fit: cover;
            margin-bottom: 15px;
            border: 3px solid white;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }

        .profile-name { font-size: 1.5rem; font-weight: 700; margin: 0 0 5px 0; }
        .profile-bio { color: var(--text-secondary); font-size: 0.95rem; margin-bottom: 20px; }
        
        .btn-primary {
            display: inline-block;
            background-color: var(--accent);
            color: white;
            text-decoration: none;
            padding: 12px 24px;
            border-radius: 50px;
            font-weight: 600;
            transition: transform 0.2s;
            box-shadow: 0 4px 10px rgba(0, 122, 255, 0.3);
        }
        .btn-primary:hover { transform: translateY(-2px); }

        /* --- –°–¢–Ü–ù–ê --- */
        .wall-container {
            column-count: 3;
            column-gap: 20px;
            max-width: 1100px;
            margin: 0 auto;
            padding: 0 20px 60px 20px;
        }

        .review-card {
            background: var(--card-bg);
            border-radius: 16px;
            padding: 24px;
            margin-bottom: 20px;
            break-inside: avoid;
            box-shadow: 0 2px 8px rgba(0,0,0,0.04);
            border: 1px solid rgba(0,0,0,0.03);
            transition: transform 0.2s;
        }

        .review-card:hover { transform: translateY(-3px); box-shadow: 0 10px 20px rgba(0,0,0,0.08); }

        .stars { color: #FFB400; font-size: 1.2rem; margin-bottom: 12px; letter-spacing: 2px; }
        .review-text { font-size: 0.95rem; color: #374151; margin-bottom: 20px; }

        /* –ê–í–¢–û–† + –ê–í–ê–¢–ê–† */
        .author {
            border-top: 1px solid #f3f4f6;
            padding-top: 15px;
            display: flex;
            align-items: center; /* –í–∏—Ä—ñ–≤–Ω—é–≤–∞–Ω–Ω—è –ø–æ —Ü–µ–Ω—Ç—Ä—É */
            gap: 12px; /* –í—ñ–¥—Å—Ç—É–ø –º—ñ–∂ —Ñ–æ—Ç–æ —ñ —Ç–µ–∫—Å—Ç–æ–º */
        }

        /* –°—Ç–∏–ª—å –¥–ª—è —Ñ–æ—Ç–æ –ø–∞—Ü—ñ—î–Ω—Ç–∞ */
        .patient-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: #eee;
            object-fit: cover;
            flex-shrink: 0; /* –©–æ–± —Ñ–æ—Ç–æ –Ω–µ —Å–ø–ª—é—â—É–≤–∞–ª–æ—Å—å */
        }

        .author-info { display: flex; flex-direction: column; }

        .author-name {
            font-weight: 600;
            font-size: 0.9rem;
            color: var(--primary);
            display: flex;
            align-items: center;
            text-decoration: none; /* –ü—Ä–∏–±–∏—Ä–∞—î–º–æ –ø—ñ–¥–∫—Ä–µ—Å–ª–µ–Ω–Ω—è */
        }
        
        /* –Ø–∫—â–æ —î –ø–æ—Å–∏–ª–∞–Ω–Ω—è, –¥–æ–¥–∞—î–º–æ –µ—Ñ–µ–∫—Ç –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–Ω—ñ */
        a.author-name:hover { color: var(--accent); text-decoration: underline; }

        .author-detail { font-size: 0.8rem; color: #9CA3AF; margin-top: 2px; }
        
        .instagram-icon {
            width: 14px;
            height: 14px;
            margin-left: 6px;
            opacity: 0.7;
        }

        @media (max-width: 900px) { .wall-container { column-count: 2; } }
        @media (max-width: 600px) { .wall-container { column-count: 1; } }
    </style>
</head>
<body>

    <div class="profile-header">
        <img src="https://cdn-icons-png.flaticon.com/512/3774/3774299.png" alt="Doctor" class="profile-img">
        <h1 class="profile-name">–í–∞—à–µ –Ü–º'—è</h1>
        <p class="profile-bio">–î–∏—Ç—è—á–∏–π –Ω–µ–≤—Ä–æ–ª–æ–≥ | PhD Candidate</p>
        <a href="LINKTREE_URL" class="btn-primary">üìÖ –ó–∞–ø–∏—Å–∞—Ç–∏—Å—å –Ω–∞ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü—ñ—é</a>
    </div>

    <div id="reviews-wall" class="wall-container">
        <p style="text-align:center; color:#999">–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è...</p>
    </div>

    <script>
        // –í–ê–®–ï –ü–û–°–ò–õ–ê–ù–ù–Ø
        const sheetUrl = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vSs5tdxHhDMHgMHYlC8sms6RUVGDBvG_6lSp2F8SQ-0GqmtgjIPNbG9ekag5Pk5goHEeZCHAy9UA6YN/pub?gid=167862335&single=true&output=csv';

        function getStars(rating) {
            if (!rating) rating = 5;
            return '‚òÖ'.repeat(rating) + '‚òÜ'.repeat(5 - rating);
        }

        Papa.parse(sheetUrl, {
            download: true,
            header: true,
            skipEmptyLines: true,
            complete: function(results) {
                const data = results.data;
                const container = document.getElementById('reviews-wall');
                container.innerHTML = '';

                if (data.length === 0) {
                    container.innerHTML = '<p style="text-align:center">–ü–æ–∫–∏ –Ω–µ–º–∞—î –≤—ñ–¥–≥—É–∫—ñ–≤.</p>';
                    return;
                }

                data.forEach(row => {
                    const review = row['Review'] || row['–í—ñ–¥–≥—É–∫'] || row['Feedback'];
                    if (!review) return;

                    const name = row['Name'] || row["–Ü–º'—è"] || '–ê–Ω–æ–Ω—ñ–º–Ω–æ';
                    const rating = parseInt(row['Rating'] || row['–û—Ü—ñ–Ω–∫–∞'] || '5');
                    const detail = row['Detail'] || row['–î–µ—Ç–∞–ª—ñ'] || ''; 
                    
                    // --- –õ–û–ì–Ü–ö–ê INSTAGRAM ---
                    // –ß–∏—Ç–∞—î–º–æ –∫–æ–ª–æ–Ω–∫—É Instagram –∞–±–æ Insta –∞–±–æ Link
                    let instaNick = row['Instagram'] || row['Insta'] || '';
                    
                    // –ß–∏—Å—Ç–∏–º–æ –Ω—ñ–∫–Ω–µ–π–º (–ø—Ä–∏–±–∏—Ä–∞—î–º–æ @, –ø—Ä–æ–±—ñ–ª–∏, –ø–æ—Å–∏–ª–∞–Ω–Ω—è)
                    instaNick = instaNick.replace('@', '').replace('https://instagram.com/', '').replace('https://www.instagram.com/', '').replace('/', '').trim();

                    // –§–æ—Ä–º—É—î–º–æ –ø–æ—Å–∏–ª–∞–Ω–Ω—è –Ω–∞ —Ñ–æ—Ç–æ (—á–µ—Ä–µ–∑ —Å–µ—Ä–≤—ñ—Å Unavatar)
                    // –Ø–∫—â–æ –Ω—ñ–∫–∞ –Ω–µ–º–∞—î, —Å—Ç–∞–≤–∏–º–æ "–ø—É—Å—Ç—É—à–∫—É"
                    let avatarUrl = '';
                    let profileLink = '';
                    
                    if (instaNick) {
                        avatarUrl = `https://unavatar.io/instagram/${instaNick}`;
                        profileLink = `https://instagram.com/${instaNick}`;
                    } else {
                        // –Ø–∫—â–æ —ñ–Ω—Å—Ç–∏ –Ω–µ–º–∞—î, –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ –Ω–µ–π—Ç—Ä–∞–ª—å–Ω—É —ñ–∫–æ–Ω–∫—É –∞–±–æ –ø–µ—Ä—à—É –ª—ñ—Ç–µ—Ä—É (–∞–ª–µ —Ç—É—Ç –ø—Ä–æ—Å—Ç–æ —ñ–∫–æ–Ω–∫—É)
                         avatarUrl = `https://ui-avatars.com/api/?name=${name}&background=random&color=fff&size=128`;
                    }

                    // –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –∫–∞—Ä—Ç–∫–∏
                    const card = document.createElement('div');
                    card.className = 'review-card';
                    
                    // –°—Ç–≤–æ—Ä—é—î–º–æ HTML –¥–ª—è —ñ–º–µ–Ω—ñ (–ø–æ—Å–∏–ª–∞–Ω–Ω—è –∞–±–æ —Ç–µ–∫—Å—Ç)
                    const nameHtml = instaNick 
                        ? `<a href="${profileLink}" target="_blank" class="author-name">${name} <img src="https://cdn-icons-png.flaticon.com/512/174/174855.png" class="instagram-icon" alt="IG"/></a>`
                        : `<span class="author-name">${name}</span>`;

                    card.innerHTML = `
                        <div class="stars">${getStars(rating)}</div>
                        <div class="review-text">${review}</div>
                        <div class="author">
                            <img src="${avatarUrl}" class="patient-avatar" onerror="this.src='https://cdn-icons-png.flaticon.com/512/847/847969.png'">
                            <div class="author-info">
                                ${nameHtml}
                                ${detail ? `<span class="author-detail">${detail}</span>` : ''}
                            </div>
                        </div>
                    `;

                    container.appendChild(card);
                });
            }
        });
    </script>
</body>
</html>
